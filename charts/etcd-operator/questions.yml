categories:
- etcd
- keyvalue
questions:
- variable: defaultImage
  default: "true"
  description: "Use default Docker image"
  label: Use Default Image
  type: enum
  options:
    - "true"
    - "false"
  show_subquestion_if: false
  subquestions:
  - variable: etcdCluster.image.repository
    default: "quay.io/coreos/etcd"
    description: "Etcd container image"
    type: string
    label: Etcd Container Image Name
  - variable: etcdCluster.image.tag
    default: "v3.2.10"
    description: "Etcd container image tag"
    type: string
    label: Etcd Container Image Tag
  - variable: etcdOperator.image.repository
    default: "quay.io/coreos/etcd-operator"
    description: "Etcd operator Docker image"
    type: string
    label: Etcd Operator Image Name
  - variable: etcdOperator.image.tag
    default: "v0.9.2"
    description: "Etcd operator Docker tag"
    type: string
    label: Etcd Operator Image Tag
  - variable: backupOperator.image.repository
    default: "quay.io/coreos/etcd-operator"
    description: "Etcd backup operator Docker image"
    type: string
    label: Etcd Backup Operator Docker Image
  - variable: backupOperator.image.tag
    default: "v0.9.2"
    description: "Etcd backup operator Docker tag"
    type: string
    label: Etcd Backup Operator Docker Tag
  - variable: restoreOperator.image.repository
    default: "quay.io/coreos/etcd-operator"
    description: "Etcd restore operator Docker image"
    type: string
    label: Etcd Restore Image Name
  - variable: restoreOperator.image.tag
    default: "v0.9.2"
    description: "Etcd restore operator Docker tag"
    type: string
    label: Etcd Restore Image Tag
- variable: deployments.etcdOperator
  default: "true"
  description: "Deploy the etcd cluster operator"
  required: true
  label: Deploy the etcd Cluster Operator
  type: enum
  options:
    - "true"
    - "false"
  show_subquestion_if: true
  subquestions:
  - variable: etcdOperator.clusterwide.enabled
    default: false
    description: "Set etcd operator manage clusters in all namespaces (more details on https://github.com/coreos/etcd-operator/blob/master/doc/user/clusterwide.md)"
    label: Set EtcdOperator Clusterwide
    type: enum
    required: true
    options:
      - true
      - false
  - variable: etcdOperator.name
    default: "etcd-operator"
    description: "Etcd Operator name"
    required: true
    label: Etcd Operator name
    type: string
  - variable: etcdOperator.replicaCount
    default: "1"
    description: "Number of operator replicas to create (only 1 is supported)"
    required: true
    label: Etcd Operator Replicas
    type: enum
    options:
      - "1"
  - variable: etcdOperator.nodeSelector
    default: "{}"
    description: "Node labels for etcd-operator pod assignment(ref: https://kubernetes.io/docs/user-guide/node-selection/)"
    label: Etcd Operator Node Selector
    type: string
  - variable: etcdOperator.commandArgs
    default: "{}"
    description: "additional command arguments for etcd operator go here; will be translated to --key=value form e.g., analytics: true"
    label: Additional Command Arguments	of Etcd Operator
    type: string
- variable: deployments.backupOperator
  default: "false"
  description: "Deploy the etcd backup operator, one time deployment, delete once completed"
  required: true
  label: Deploy the etcd Backup Operator
  type: enum
  options:
    - "true"
    - "false"
  show_subquestion_if: true
  subquestions:
  - variable: backupOperator.name
    default: "etcd-backup-operator"
    description: "Backup operator name"
    required: true
    label: Backup Operator name
    type: string
  - variable: backupOperator.replicaCount
    default: "1"
    description: "Number of operator replicas to create (only 1 is supported)"
    required: true
    label: Backup Operator Replicas
    type: enum
    options:
      - "1"
  - variable: backupOperator.spec.storageType
    default: "S3"
    description: "Storage to use for backup file, currently only S3 supported"
    label: Backup Storage Type
    type: enum
    required: true
    options:
      - "S3"
  - variable: backupOperator.spec.s3.s3Bucket
    default: ""
    description: "Bucket in S3 to store backup file"
    label: Backup Bucket Name in S3
    type: string
    required: true
  - variable: backupOperator.spec.s3.awsSecret
    default: ""
    description: "Name of kubernetes secrete containing aws credentials"
    label: Kubernetes secrete name of AWS Credentails
    type: string
    required: true
  - variable: backupOperator.nodeSelector
    default: "{}"
    description: "Node labels for etcd backup operator pod assignment(ref: https://kubernetes.io/docs/user-guide/node-selection)"
    label: Etcd Operator Node Selector
    type: string
  - variable: backupOperator.commandArgs
    default: "{}"
    description: "additional command arguments for etcd backup operator go here; will be translated to --key=value form e.g., analytics: true"
    label: Additional command arguments	of Etcd Operator
    type: string
- variable: deployments.restoreOperator
  default: "false"
  description: "Deploy the etcd restore operator, one time deployment, delete once completed"
  required: true
  label: Deploy the etcd Restore Operator
  type: enum
  options:
    - "true"
    - "false"
  show_subquestion_if: true
  subquestions:
  - variable: restoreOperator.name
    default: "etcd-restore-operator"
    description: "Restore operator name"
    required: true
    label: Restore Operator name
    type: string
  - variable: restoreOperator.replicaCount
    default: "1"
    description: "Number of operator replicas to create (only 1 is supported)"
    required: true
    label: Restore Operator Replicas
    type: enum
    options:
      - "1"
  - variable: restoreOperator.spec.s3.path
    default: ""
    description: "Path in S3 bucket containing the backup file, The format of path must be: <s3-bucket-name>/<path-to-backup-file> # e.g: etcd-snapshot-bucket/v1/default/example-etcd-cluster/3.2.10_0000000000000001_etcd.backup"
    label: Restore File Path
    type: string
    required: true
  - variable: restoreOperator.spec.s3.awsSecret
    default: ""
    description: "Name of kubernetes secrete containing aws credentials"
    label: Kubernetes secrete name of AWS Credentails
    type: string
    required: true
  - variable: restoreOperator.nodeSelector
    default: "{}"
    description: "Node labels for etcd backup operator pod assignment(ref: https://kubernetes.io/docs/user-guide/node-selection)"
    label: Etcd Operator Node Selector
    type: string
  - variable: restoreOperator.commandArgs
    default: "{}"
    description: "additional command arguments for etcd backup operator go here; will be translated to --key=value form e.g., analytics: true"
    label: Additional command arguments	of Etcd Operator
    type: string
- variable: createCustomResources
  default: "false"
  description: "creates Kubernetes custom resources definitions (options: EtcdCluster, EtcdBackup, EtcdRestore)"
  label: Create Kubernetes Custom Resources (EtcdCluster, EtcdBackup, EtcdRestore)
  type: enum
  options:
    - "true"
    - "false"
  show_subquestion_if: true
  subquestions:
  - variable: customResources.createEtcdClusterCRD
    default: "false"
    description: "Create a custom resource: EtcdCluster"
    label: Create a ETCD Cluster
    type: enum
    show_if: "deployments.etcdOperator=true"
    options:
      - "true"
      - "false"
  - variable: customResources.createBackupCRD
    default: "false"
    description: "Create a custom resource: EtcdBackup"
    label: Create a ETCD Backup Cluster
    type: enum
    show_if: "deployments.backupOperator=true"
    options:
      - "true"
      - "false"
  - variable: customResources.createRestoreCRD
    default: "false"
    description: "Create a custom resource: EtcdRestore"
    label: Create a ETCD Restore Cluster
    type: enum
    show_if: "deployments.restoreOperator=true"
    options:
    - "true"
    - "false"
- variable: etcdCluster.name
  default: "etcd-cluster"
  description: "etcd cluster name"
  label: Etcd Cluster Name
  type: string
  required: true
  show_if: "createCustomResources=true"
- variable: etcdCluster.size
  default: "3"
  description: "etcd cluster size"
  label: Etcd Cluster Size
  type: enum
  options:
    - "3"
    - "5"
    - "7"
    - "9"
    - "11"
  show_if: "createCustomResources=true"
  required: true
- variable: etcdCluster.version
  default: "3.2.10"
  description: "etcd cluster version"
  label: Etcd Cluster Version
  type: string
  show_if: "createCustomResources=true"
  required: true
- variable: etcdCluster.pod.nodeSelector
  default: "{}"
  description: "node labels for etcd cluster pod assignment, e.g, {disktype: ssd, type: worker}"
  label: Node Labels for etcd Pod Assignment
  type: string
  show_if: "createCustomResources=true"
- variable: etcdCluster.enableTLS
  default: "false"
  description: "Enable use of TLS"
  label: Enable use of TLS
  type: enum
  options:
    - "true"
    - "false"
  show_subquestion_if: true
  show_if: "createCustomResources=true"
  required: true
  subquestions:
  - variable: etcdCluster.tls.static.member.peerSecret
    default: ""
    description: "Kubernetes secret containing TLS peer certs"
    required: true
    label: k8s Secret Name of TLS Peer Certs
    type: string
  - variable: etcdCluster.tls.static.member.serverSecret
    default: ""
    description: "Kubernetes secret containing TLS server certs"
    required: true
    label: k8s Secret Name of TLS Server Certs
    type: string
  - variable: etcdCluster.tls.static.operatorSecret
    default: ""
    description: "Kubernetes secret containing TLS client certs"
    required: true
    label: k8s Secret Name of TLS Client Certs
    type: string
